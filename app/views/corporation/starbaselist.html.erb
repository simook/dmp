<%= render 'nav' %>
<div class="container-fluid">
  <div class="row-fluid">
    <div class="span3">
      <ul class="nav nav-list inner-well" data-bind="foreach:starbaseList">
        <li>
          <a href="#tab1" data-toggle="tab" data-bind="attr:{href:'#starbase'+$index()}">
            <span class="title" data-bind="name:type_id"></span>
            <i class="icon-chevron-right pull-right"></i>
          </a>
        </li>
      </ul>
    </div>
    <div class="span9 transparent-box">
      <div class="tab-content" data-bind="foreach:starbaseList">
        <div class="tab-pane padded" data-bind="attr:{id:'starbase'+$index()}">
          <div class="row-fluid">
            <div class="span12">
              <div class="box">
                <div class="tab-header">
                  Info
                  <span class="pull-right muted last-updated" data-bind="date:updated_at"></span>
                </div>
                <table class="table table-condensed box">
                  <tbody>
                    <tr>
                      <td><b>Type</b></td>
                      <td data-bind="name:type_id"></td>
                    </tr>
                    <tr>
                      <td><b>Location</b></td>
                      <td data-bind="text:item_id"></td>
                    </tr>
                    <tr>
                      <td><b>Moon</b></td>
                      <td data-bind="text:moon_id"></td>
                    </tr>
                    <tr>
                      <td><b>Status</b></td>
                      <td>
                        <span data-bind="state: state"></span>
                        <span data-bind="uptime:{begin:online_timestamp,end:state_timestamp}"></span>
                      </td>
                    </tr>
                    <tr>
                      <td><b>Owner</b></td>
                      <td data-bind="text:standing_owner_id"></td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
          <div class="row-fluid" data-bind="with: details">
            <div class="span6">
              <div class="box">
                <div class="tab-header">Combat Settings</div>
                <table class="table table-condensed box" data-bind="foreach: combat_settings">
                  <tr>
                    <td><b data-bind="text: name"></b></td>
                    <td data-bind="foreach: attribs">
                      <span data-bind="text:name+' '+value"></span>
                    </td>
                  </tr>
                </table>
              </div>
            </div>
            <div class="span6">
              <div class="box">
                <div class="tab-header">General Settings</div>
                <table class="table table-condensed box" data-bind="foreach: settings">
                  <tr>
                    <td><b data-bind="text: name"></b></td>
                    <td data-bind="text: value"></td>
                  </tr>
                </table>
              </div>
            </div>
          </div>
          <div class="row-fluid">
            <div class="box" data-bind="with: details">
              <div class="tab-header">Fuel</div>
              <div class="padded" data-bind="foreach: fuel">
                <div class="progress starbase-fuel">
                  <div class="bar" style="width:100%">
                    <span data-bind="name:type_id"></span>
                    x <span data-bind="text:quantity"></span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<script type="text/javascript">
  dmp.corporation.init();
  <% if @corpadmin %>
    dmp.corporation.starbaselist();
  <% end %>
</script>